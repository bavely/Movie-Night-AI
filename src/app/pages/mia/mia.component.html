<section class="bg-gray-800 bg-opacity-90 flex flex-row z-30 sticky top-0">
  <div class="basis-1 rounded-full self-center m-10 p-10">
    <!-- Nave bar Placeholder -->
  </div>

  <div
    class="h-20 self-center rounded-full border-4 shadow-white/50 shadow-xl max-w-20 w-20 m-6 flex justify-center basis-1/4 heading"
  >
    <svg
      class="self-center"
      width="400"
      height="400"
      viewBox="75 50 350 400"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <!-- First text -->
      <text fill="white" font-size="20px">
        <tspan x="64%" y="45%" class="self-center">IT'S</tspan>
      </text>

      <!-- Second text -->
      <text fill="white">
        <tspan x="27%" y="60%" class="heading self-center">MOVIE NIGHT</tspan>
      </text>

      <!-- Image (Make sure the png variable is defined in your component's TS file) -->
      <image
        href="assets/images/i22.png"
        type="png"
        height="150"
        width="150"
        x="50%"
        y="60%"
      ></image>

      <defs>
        <path d="M250,400 a150,150 0 0,1 0,-300a150,150 0 0,1 0,300Z" id="a" />
      </defs>

      <!-- Text along path -->
      <g>
        <text>
          <textPath xlink:href="#a" fill="white" font-size="30px">
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp; BUCKLE UP
          </textPath>
        </text>
      </g>
    </svg>
  </div>
  <div class="basis-3/4 flex justify-center self-center mt-3 mb-3">
    <p-avatar
      image="assets/images/AI.jpg"
      styleClass="mr-2"
      size="xlarge"
      shape="circle"
    />
  </div>
</section>

<section class="flex flex-row h-full">
  <div class="flex flex-col w-1/4 gap-4 h-auto pl-2">
    <div
      class="flex flex-row gap-4 h-auto flex-wrap h-1/8 justify-center items-center "
    >
      <p class="text-white text-2xl text-amber-100">Sugested Movies</p>
    </div>
    <div
      class="flex flex-row gap-4 h-auto flex-wrap h-7/8 justify-center items-center overflow-auto"
      style="max-height: 573px"
    >
      @for (s of sugestedMovies; track $index) {

      <app-moviecontainer [movie]="s"></app-moviecontainer>
      }
    </div>
  </div>

  <!-- Right -->
  <div class="w-3/4 h-full flex flex-col bg-zinc-900 ">
    <!-- Messages -->
    <div
      class="flex-1 overflow-auto "
      style="background-color: transparent;"
      #chatContainer
    >
      <div class="py-2 px-3" style="height: 500px">
        @for (m of messages; track $index) { @if (m.roll == "mia") {
        <div class="flex mb-5">
          <div
            class="rounded py-2 px-3 bg-gray-900 text-white"
            style="max-width: 50%"
          >
            <p class="text-sm text-teal">MIA</p>
            @if($index == messages.length - 1 && !isInit) {
              <om-typewriter
              [words]="[m.message]"
              [disableLoop]="true"
              [writeDelay]="1000"
            ></om-typewriter>
            }@else {
            <p class="text-sm mt-1">
              {{ m.message }}
            </p>
          }

            <p class="text-right text-xs text-grey-dark mt-1">
              {{ m.time }}
            </p>
          </div>
        </div>
        }@else {
        <div class="flex justify-end mb-5">
          <div
            class="rounded py-2 px-3 bg-fuchsia-950 text-white"
            style="max-width: 50%"
          >
            <p class="text-sm text-teal">Me</p>
            <p class="text-sm mt-1">
              {{ m.message }}
            </p>
            <p class="text-right text-xs text-grey-dark mt-1">
              {{ m.time }}
            </p>
          </div>
        </div>
        } }
      </div>
    </div>

    <!-- Input -->
    <div
      class="bg-grey-lighter px-4 py-4 flex items-center sticky bottom-0 bg-gray-800 text-white mt-3"
    >
      <div class="flex-1 mx-4">
        <input
          class="w-full border rounded px-2 py-2 text-grey-darker"
          type="text"
          placeholder="Type a message"
          [(ngModel)]="messageInput"
          style="color: rgb(80, 80, 80)"
        />
      </div>
      <div (click)="sendMessage(messageInput)" class="cursor-pointer">
        <i
          class="pi pi-send"
          style="
            font-size: 1.5rem;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.3);
          "
        ></i>
      </div>
    </div>
  </div>
</section>
